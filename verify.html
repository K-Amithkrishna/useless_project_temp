<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meme CAPTCHA Multi-Step</title>
    <style>
        * {margin:0; padding:0; box-sizing:border-box;}
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .captcha-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            max-width: 400px;
            width: 100%;
            overflow: hidden;
        }
        .header {
            background: #4285f4;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .instruction-text { font-weight:300; font-size:14px; }
        .main-text { font-weight:500; font-size:18px; margin-top:5px; }
        .image-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2px;
            padding: 2px;
            background: #e0e0e0;
        }
        .image-cell { position: relative; aspect-ratio: 1; cursor: pointer; overflow: hidden; background: #f0f0f0; transition: all 0.2s ease; }
        .image-cell img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .image-cell::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(66, 133, 244, 0.3); opacity: 0; transition: opacity 0.2s ease; pointer-events: none;
        }
        .image-cell.selected::after { opacity: 1; }
        .image-cell.selected::before {
            content: '✓'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: #4285f4; color: white; width: 30px; height: 30px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 16px; z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .footer { display: flex; justify-content: center; padding: 16px 20px; background: #fafafa; border-top: 1px solid #e0e0e0; }
        .verify-btn {
            background: #4285f4; color: white; border: none; padding: 8px 20px; border-radius: 4px; cursor: pointer;
            font-size: 14px; font-weight: 500; transition: background 0.2s ease; min-width: 70px;
        }
        .verify-btn:hover { background: #3367d6; }
        .verify-btn.hidden { display: none; }
        .feedback { padding: 12px 20px; margin: 0; font-size: 14px; text-align: center; font-weight: 500; }
        .feedback.success { background: #e8f5e8; color: #2e7d2e; border-top: 2px solid #4caf50; }
        .feedback.error { background: #ffeaea; color: #d32f2f; border-top: 2px solid #f44336; }
    </style>
</head>
<body>
    <div class="captcha-container">
        <div class="header">
            <div class="instruction-text">Select:</div>
            <div class="main-text" id="main-text">traffic lights</div>
        </div>
        
        <div class="image-grid" id="image-grid"></div>
        
        <div id="feedback" class="feedback" style="display: none;"></div>
        
        <div class="footer">
            <button class="verify-btn hidden" id="verifyBtn">VERIFY</button>
        </div>
    </div>

    <script>
        // Questions
        const questions = [
            {
                text: "traffic lights",
                correct: ["3"],
                images: [
                    "https://images.unsplash.com/photo-1580618672591-eb180b1a973f?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1572969176403-0d3967893df2?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=300&h=300&fit=crop"
                ]
            },
            {
                text: "cats",
                correct: ["1"],
                images: [
                    "https://images.unsplash.com/photo-1592194996308-7b43878e84a6?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1518791841217-8f162f1e1131?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1517256064527-09c73fc73e92?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1607746882042-944635dfe10e?w=300&h=300&fit=crop"
                ]
            },
            {
                text: "old ppls",
                correct: ["1"],
                images: [
                    "https://images.unsplash.com/photo-1592194996308-7b43878e84a6?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1518791841217-8f162f1e1131?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1517256064527-09c73fc73e92?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1607746882042-944635dfe10e?w=300&h=300&fit=crop"
                ]
            },
            {
                text: "bicycles",
                correct: ["2"],
                images: [
                    "https://images.unsplash.com/photo-1520975867598-34a2d3ecc9cd?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1508830524289-0adcbe822b40?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1491553895911-0055eca6402d?w=300&h=300&fit=crop",
                    "https://images.unsplash.com/photo-1485968579580-b6d095142e6e?w=300&h=300&fit=crop"
                ]
            }
        ];

        let currentQuestion = 0;
        let selectedImages = new Set();

        const mainText = document.getElementById("main-text");
        const grid = document.getElementById("image-grid");
        const verifyBtn = document.getElementById("verifyBtn");
        const feedbackDiv = document.getElementById("feedback");

        function loadQuestion() {
            const q = questions[currentQuestion];
            mainText.textContent = q.text;
            grid.innerHTML = "";
            selectedImages.clear();
            verifyBtn.classList.add("hidden");
            feedbackDiv.style.display = "none";

            q.images.forEach((url, index) => {
                const cell = document.createElement("div");
                cell.classList.add("image-cell");
                cell.dataset.id = (index + 1).toString();
                cell.innerHTML = `<img src="${url}" alt="captcha image">`;
                cell.addEventListener("click", () => {
                    cell.classList.toggle("selected");
                    if (selectedImages.has(cell.dataset.id)) {
                        selectedImages.delete(cell.dataset.id);
                    } else {
                        selectedImages.add(cell.dataset.id);
                    }
                    verifyBtn.classList.toggle("hidden", selectedImages.size === 0);
                });
                grid.appendChild(cell);
            });
        }

        verifyBtn.addEventListener("click", () => {
            const q = questions[currentQuestion];
            const isCorrect =
                selectedImages.size === q.correct.length &&
                [...selectedImages].every(id => q.correct.includes(id));

            if (isCorrect) {
                feedbackDiv.className = "feedback success";
                feedbackDiv.textContent = "Type shit!";
                feedbackDiv.style.display = "block";
                setTimeout(() => {
                    currentQuestion++;
                    if (currentQuestion < questions.length) {
                        loadQuestion();
                    } else {
                        window.location.href = "success.html";
                    }
                }, 800);
            } else {
                feedbackDiv.className = "feedback error";
                feedbackDiv.textContent = "❌ Incorrect.Bot Detected";
                feedbackDiv.style.display = "block";
            }
        });

        loadQuestion();
    </script>
</body>
</html>
